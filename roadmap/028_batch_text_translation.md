# 028: 吹き出しテキスト一括翻訳

## 規模: M (中)

## 概要
マンガ内の全吹き出しテキストをLLM APIで一括翻訳する機能。日本語マンガの多言語展開や、海外ユーザーが日本語テンプレートを自国語に変換する用途に対応。

## 現状の問題
- 吹き出しテキストの翻訳は手動で一つずつ行う必要がある
- 10言語のUI翻訳はあるが、コンテンツ（マンガ本文）の翻訳支援がない
- 海外展開を考えるマンガ家にとって翻訳作業が大きなボトルネック

## 修正内容
### 翻訳機能
- 翻訳元/翻訳先の言語選択
- 全ページ / 現在のページの選択
- LLM API連携（ローカルLLMまたは外部API）
  - マンガの文脈を考慮した翻訳（単なる直訳でなくセリフ調を維持）
  - プロンプトで「マンガのセリフとして自然な翻訳」を指示
- 翻訳結果のプレビュー（元テキストと並列表示）
- 個別に修正可能（翻訳結果のテキスト編集）
- 一括適用 / 個別適用の選択

### テキスト管理
- 全吹き出しテキストの一覧表示
- ページ番号・コマ位置との対応表示
- CSV/JSONでのテキスト一括エクスポート/インポート

### 縦書き↔横書き自動切り替え
- 日本語→英語翻訳時に縦書きTextboxを横書きに自動変換
- フォントサイズの自動調整（言語による文字量の違いに対応）

## 該当箇所
- 新規: `js/ai/translation/`
  - `text-translator.js` - 翻訳ロジック
  - `translation-panel.js` - 翻訳UI
- 修正: 吹き出しテキスト関連

## 影響範囲
- 吹き出しテキストの読み取り・書き換え
- 外部API連携の追加

## 売りポイント
- マンガの多言語展開を劇的に効率化
- 10言語のUI対応と合わせて、真のグローバル対応マンガエディタに
- セリフのニュアンスを維持するLLM翻訳は機械翻訳と差別化
- 縦書き↔横書きの自動変換は他ツールにない独自機能
