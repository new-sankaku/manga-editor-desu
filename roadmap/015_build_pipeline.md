# 015: ビルドパイプラインの導入

## 規模: L (大)

## 概要
現在100以上の`<script>`タグで個別読み込みしているJSファイルを、
ビルドツールでバンドル・最適化する。

## 該当箇所
- `index.html`（全scriptタグ）
- `js/`配下の全ファイル
- `package.json`

## 現状の問題
- 100以上の個別HTTPリクエストが初回読み込みで発生
- JSの最小化（minify）が行われていない
- ツリーシェイキングなし（未使用コードも全て読み込み）
- ソースマップがなくデバッグが困難
- 開発時のホットリロードなし

## 修正内容
### ビルドツール選定
- **Vite**を推奨（設定が軽量、ESM対応、高速HMR）
- グローバル変数ベースの既存コードとの互換性確保が課題

### 段階的導入
#### Phase 1: 開発環境の整備
- Viteの導入と基本設定
- 開発サーバー（HMR対応）の構築
- 既存のグローバル変数を`window`経由で維持

#### Phase 2: バンドルと最適化
- エントリーポイントの設定
- 共通チャンクの分離（vendor / app / data）
- CSS結合と最小化
- 画像/SVGアセットの最適化

#### Phase 3: コード分割
- ルートベースのコード分割（AI機能、エフェクト等）
- 動的インポートによる遅延読み込み

## 注意事項
- グローバル変数への依存を一気に排除するのは現実的でない
- まずはバンドルのみ導入し、モジュール化は別タスクとする
- GitHub Pagesデプロイとの互換性を確保

## 影響範囲
- プロジェクト全体のビルドプロセス
- 開発ワークフロー
- デプロイプロセス
